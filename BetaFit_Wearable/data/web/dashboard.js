/* globals Chart:false, feather:false */(() => {'use strict'feather.replace({ 'aria-hidden': 'true' })let xhttp = new XMLHttpRequest();xhttp.onreadystatechange = function() {if (this.readyState == 4 && this.status == 200){const jsonObj = JSON.parse(this.responseText);document.getElementById("titulo_grafica").innerHTML += (" (en el mes de " + jsonObj.pasos.mes + ")");//Rellenar gráfica de los pasoslet days=[];let values=[];for (const i in jsonObj.pasos.muestras) {days.push(jsonObj.pasos.muestras[i].dia);values.push(jsonObj.pasos.muestras[i].valor);}// Graphsconst ctx = document.getElementById('myChart')// eslint-disable-next-line no-unused-varsconst myChart = new Chart(ctx, {type: 'line',data: {labels: days,datasets: [{data: values,lineTension: 0,backgroundColor: 'transparent',borderColor: '#007bff',borderWidth: 4,pointBackgroundColor: '#007bff'}]},options: {scales: {yAxes: [{ticks: {beginAtZero: false}}]},legend: {display: false}}})//Rellenar tabla de las muestras de temperaturalet tbodyRefTemp = document.getElementById("tabla_temperatura").getElementsByTagName("tbody")[0];for (const i in jsonObj.temperaturas) {const date = new Date(jsonObj.temperaturas[i].tiempo);// Insert a row at the end of tablelet row = tbodyRefTemp.insertRow();// Insert cellsrow.insertCell().innerHTML = (Number(i) + 1);row.insertCell().innerHTML = date.getFullYear();row.insertCell().innerHTML = date.getMonth();row.insertCell().innerHTML = date.getDate();row.insertCell().innerHTML = ('0' + date.getHours()).slice(-2) + ":" + ('0' + date.getMinutes()).slice(-2) + ":" + ('0' + date.getSeconds()).slice(-2);row.insertCell().innerHTML = (jsonObj.temperaturas[i].valor + " ºC");if(jsonObj.temperaturas[i].alarma)row.setAttribute("style", "background-color: #FF6961;");}//Rellenar tabla de las muestras de frecuencia cardiacalet tbodyRefFrec = document.getElementById("tabla_frecuencia_cardiaca").getElementsByTagName("tbody")[0];for (const i in jsonObj.frecuenciacardiaca) {const date = new Date(jsonObj.frecuenciacardiaca[i].tiempo);// Insert a row at the end of tablelet row = tbodyRefFrec.insertRow();// Insert cellsrow.insertCell().innerHTML = (Number(i) + 1);row.insertCell().innerHTML = date.getFullYear();row.insertCell().innerHTML = date.getMonth();row.insertCell().innerHTML = date.getDate();row.insertCell().innerHTML = ('0' + date.getHours()).slice(-2) + ":" + ('0' + date.getMinutes()).slice(-2) + ":" + ('0' + date.getSeconds()).slice(-2);row.insertCell().innerHTML = (jsonObj.frecuenciacardiaca[i].valor + " ppmin");if(jsonObj.frecuenciacardiaca[i].alarma)row.setAttribute("style", "background-color: #FF6961;");}}};xhttp.open('GET', window.location.href.replace(/\/web.*/g, "") + "/data/measurements", true);xhttp.send();})()